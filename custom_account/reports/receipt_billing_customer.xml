<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>

        <record id="paperformat_receipt_billing_customer" model="report.paperformat">
            <field name="name">Paper Format Receipt Customer Bill</field>
            <field name="default" eval="True"/>
            <field name="format">A4</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">20</field>
            <field name="margin_bottom">20</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">15</field>
            <field name="dpi">90</field>
        </record>

        <record id="report_receipt_billing_customer" model="ir.actions.report">
            <field name="name">Report Receipt Customer Bill</field>
            <field name="model">receipt.billing.customer</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">custom_account.receipt_billing_customer</field>
            <field name="report_file">custom_account.receipt_billing_customer</field>
            <field name="binding_model_id" eval="False"/>
            <field name="binding_model_id" ref="model_receipt_billing_customer"/>
            <field name="binding_type">report</field>
            <field name="print_report_name">'Receipt Customer Bill - %s' %(object.name)</field>
            <field name="paperformat_id" ref="paperformat_receipt_billing_customer"/>
        </record>

        <!-- <report
                id="report_receipt_billing_customer"
                model="receipt.billing.customer"
                string="Report Receipt Customer Bill"
                report_type="qweb-pdf"
                name="custom_account.receipt_billing_customer"
                file="custom_account.receipt_billing_customer"
                attachment_use="False"
                paperformat="custom_account.paperformat_receipt_billing_customer"
                menu="False"
        /> -->

        <template id="receipt_billing_customer_document">
            <t t-call="web.basic_layout">
                <div class="page" style="font-size: 80%;">
                    <style>
                    .table-border {
                        border-collapse: collapse;
                    }
                    .table-border th, .table-border td {
                        border: 1px solid #dddddd;
                    }
                    .rem-border-td td {
                        border: 0px;
                    }
                    </style>
                    <table class="table table-border" style="border: 1px solid #dddddd;">
                        <tbody>
                            <tr style="text-align:center;">
                                <th>
                                    <strong>
                                    <span t-field="doc.company_id.name"/>
                                    </strong>
                                </th>
                                <th>
                                    <strong>
                                    <span>ใบสำคัญรับ</span>
                                    </strong>
                                </th>
                                <th>
                                    <strong>
                                    <span>เลขที่เอกสาร</span>
                                    <span t-field="doc.name"/>
                                    </strong>
                                </th>
                            </tr>
                            <tr>
                                <td colspan="3" align="center">
                                    <table class="rem-border-td" style="width:98%; margin-top:20px; margin-bottom:20px;">
                                        <tbody>
                                            <tr style="text-align:right;">
                                                <td>
                                                    <span>วันที่</span>
                                                    <!-- <span t-field="doc.document_date"/> -->
                                                    <span t-field="doc.move_id.date"/>
                                                    <span style="margin-right:100px;"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span>ได้รับเงินจาก</span>
                                                    <span t-field="doc.partner_id"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span>จำนวนเงิน</span>
                                                    <!-- <span style="margin-right:5px;" t-field="doc.amount_total"/> -->
                                                    <span style="margin-right:5px;" t-esc="'{:,.2f} บาท'.format(doc.amount_total)"/>
                                                    (
                                                    <span t-field="doc.amount_total_text"/>
                                                    )
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span>รับเงินโดย</span>
                                                    <span t-field="doc.bank_account_id"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-border o_report_block_table" style="font-size: 85%; margin-top: -16px;">
                        <thead style="font-size: 105%;">
                            <tr style="text-align:center;">
                                <th>
                                    <span>เลขที่บัญชี/ชื่อบัญชี</span>
                                </th>
                                <th>
                                    <span>เดบิต</span>
                                </th>
                                <th>
                                    <span>เครดิต</span>
                                </th>
                            </tr>
                        </thead>
                        <t t-set="sum_debit" t-value="0.0"/>
                        <t t-set="sum_credit" t-value="0.0"/>
                        <tbody>
                            <tr t-foreach="doc.move_id.line_ids" t-as="move_line">
                                <td>
                                    <span t-field="move_line.account_id"/>
                                </td>
                                <td align="right">
                                    <span t-field="move_line.debit"/>
                                    <t t-set="sum_debit" t-value="sum_debit + move_line.debit"/>
                                </td>
                                <td align="right">
                                    <span t-field="move_line.credit"/>
                                    <t t-set="sum_credit" t-value="sum_credit + move_line.credit"/>
                                </td>
                            </tr>
                            <tr style="font-size: 105%;">
                                <td>
                                </td>
                                <td align="center">
                                    <strong>
                                    <span t-esc="'{:,.2f} บาท'.format(sum_debit)"/>
                                    </strong>
                                </td>
                                <td align="center">
                                    <strong>
                                    <span t-esc="'{:,.2f} บาท'.format(sum_credit)"/>
                                    </strong>
                                </td>
                            </tr>
                            <tr style="font-size: 105%;">
                                <td align="center">
                                    <strong>
                                    (
                                    <span t-esc="doc.company_currency_id.amount_to_text(sum_debit, 'th_TH', 'th')"/>
                                    )
                                    </strong>
                                </td>
                                <td colspan="2" style="border-right:0px; border-bottom:0px;">
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-border" style="font-size: 85%; margin-top:50px;">
                        <tbody>
                            <tr style="text-align:center;">
                                <td>
                                    <span>ผู้จัดทำ.............................................</span>
                                </td>
                                <td>
                                    <span>ผู้ตรวจสอบ..........................................</span>
                                </td>
                                <td>
                                    <span>ผู้อนุมัติ.............................................</span>
                                </td>
                                <td>
                                    <span>ผู้บันทึกบัญชี.........................................</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <template id="receipt_billing_customer">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="custom_account.receipt_billing_customer_document"/>
                </t>
            </t>
        </template>

    </data>
</odoo>